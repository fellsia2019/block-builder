<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naberika - –ß–∏—Å—Ç—ã–π JavaScript</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .demo-section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }

        .demo-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .blocks-container {
            width: 100%;
            margin: 20px 0;
        }

        .block {
            width: 100%;
            margin-bottom: 30px;
            border: 2px solid #007bff;
            border-radius: 8px;
            background: rgba(0, 123, 255, 0.05);
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .block:hover {
            background: rgba(0, 123, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.2);
        }

        .block.selected {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2);
        }

        .block.locked {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.05);
        }

        .block-header {
            background: rgba(0, 123, 255, 0.1);
            padding: 10px 15px;
            border-bottom: 1px solid #007bff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #2c3e50;
        }

        .block-content {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #333;
            min-height: 60px;
        }

        .block.hidden {
            opacity: 0.3;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .stat-card .number {
            font-size: 2rem;
            font-weight: bold;
            color: #4facfe;
        }

        .log {
            background: #1e1e1e;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 4px 0;
        }

        .log-entry.success {
            color: #50fa7b;
        }

        .log-entry.error {
            color: #ff5555;
        }

        .log-entry.info {
            color: #8be9fd;
        }

        .log-entry.warning {
            color: #ffb86c;
        }

        .architecture-diagram {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .architecture-diagram h3 {
            color: #333;
            margin-bottom: 15px;
            text-align: center;
        }

        .layer {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            text-align: center;
            font-weight: 600;
        }

        .layer-core {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .layer-infrastructure {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .layer-ui {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .arrow {
            text-align: center;
            font-size: 1.5rem;
            color: #666;
            margin: 5px 0;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω —Ñ–æ—Ä–º */
        .form-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
        }

        .form-dialog-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .form-dialog {
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .form-dialog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .form-dialog-header h3 {
            margin: 0;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #f5f5f5;
            color: #333;
        }

        .form-dialog-content {
            padding: 20px;
        }

        .form-description {
            margin: 0 0 20px 0;
            color: #666;
            font-size: 14px;
        }

        .naberika-form {
            max-width: none;
            margin: 0;
            padding: 0;
            background: none;
            border-radius: 0;
            box-shadow: none;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .checkbox-label input {
            margin-right: 8px;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        .form-control.error {
            border-color: #dc3545;
        }

        .field-errors {
            margin-top: 5px;
            font-size: 12px;
            color: #dc3545;
        }

        .field-errors .error {
            display: block;
            margin-bottom: 2px;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞–º–∏ */
        .block-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #2c3e50;
        }

        .block-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .block-type {
            font-weight: 600;
            text-transform: capitalize;
        }

        .block-id {
            font-family: monospace;
            font-size: 12px;
            color: #666;
        }

        .lock-icon, .hidden-icon {
            font-size: 12px;
        }

        .block-controls {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .card-section {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .card-section h4 {
            margin: 0 0 15px 0;
            color: #495057;
            font-size: 16px;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 8px;
        }

        .control-btn {
            background: none;
            border: none;
            padding: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
        }

        .control-btn:hover:not(:disabled) {
            background: rgba(0, 0, 0, 0.1);
            transform: scale(1.1);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .edit-btn:hover {
            background: rgba(0, 123, 255, 0.2);
        }

        .move-up-btn:hover, .move-down-btn:hover {
            background: rgba(40, 167, 69, 0.2);
        }

        .toggle-visibility-btn:hover, .toggle-lock-btn:hover {
            background: rgba(255, 193, 7, 0.2);
        }

        .delete-btn:hover {
            background: rgba(220, 53, 69, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è Naberika - –ß–∏—Å—Ç—ã–π JavaScript</h1>
            <p>–ë–ª–æ—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π</p>
        </div>

        <div class="content">
            <!-- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ -->
            <div class="demo-section">
                <h2>üéØ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h2>
                <div class="architecture-diagram">
                    <h3>–°–ª–æ–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã</h3>
                    <div class="layer layer-ui">üé® UI Layer</div>
                    <div class="arrow">‚¨áÔ∏è</div>
                    <div class="layer layer-core">üéØ Core Layer (Use Cases)</div>
                    <div class="arrow">‚¨áÔ∏è</div>
                    <div class="layer layer-infrastructure">üîß Infrastructure Layer</div>
                </div>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞–º–∏ -->
            <div class="demo-section">
                <h2>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞–º–∏</h2>
                <div class="controls">
                    <button class="btn btn-primary" onclick="showCreateForm('text')">
                        üìù –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç
                    </button>
                    <button class="btn btn-success" onclick="showCreateForm('image')">
                        üñºÔ∏è –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    </button>
                    <button class="btn btn-info" onclick="showCreateForm('button')">
                        üîò –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É
                    </button>
                    <button class="btn btn-warning" onclick="showCreateForm('cardlist')">
                        üÉè –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏
                    </button>
                    <button class="btn btn-warning" onclick="addContainerBlock()">
                        üì¶ –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                    </button>
                    <button class="btn btn-danger" onclick="clearAllBlocks()">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                    </button>
                </div>

                <div class="blocks-container" id="blocks-container"></div>

                <div class="stats">
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ –±–ª–æ–∫–æ–≤</h3>
                        <div class="number" id="totalBlocks">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>–í—ã–±—Ä–∞–Ω–Ω—ã–π –±–ª–æ–∫</h3>
                        <div class="number" id="selectedBlock">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</h3>
                        <div class="number" id="lockedBlocks">0</div>
                    </div>
                </div>
            </div>

            <!-- –õ–æ–≥ -->
            <div class="demo-section">
                <h2>üìã –õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
                <div class="log" id="log"></div>
            </div>
        </div>
    </div>

    <script type="module">
        // –ò–º–ø–æ—Ä—Ç Naberika (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ)
        // import { BlockManagementUseCase, MemoryBlockRepositoryImpl, MemoryComponentRegistry } from '../index.js';

        // –ò–º–∏—Ç–∞—Ü–∏—è Naberika –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        class SimpleBlock {
            constructor(data) {
                this.id = `block_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                this.type = data.type;
                this.settings = data.settings || {};
                this.props = data.props || {};
                this.template = data.template;
                this.visible = data.visible !== false;
                this.locked = data.locked || false;
                this.selected = false;
            }

            updateSettings(newSettings) {
                this.settings = { ...this.settings, ...newSettings };
            }

            updateProps(newProps) {
                this.props = { ...this.props, ...newProps };
            }

            setLocked(locked) {
                this.locked = locked;
            }

            setVisible(visible) {
                this.visible = visible;
            }

            setSelected(selected) {
                this.selected = selected;
            }
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let blocks = [];
        let selectedBlockId = null;

        // –£—Ç–∏–ª–∏—Ç—ã
        function log(message, type = 'info') {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${timestamp}] ${message}`;
            logElement.appendChild(entry);
            logElement.scrollTop = logElement.scrollHeight;
        }

        function updateStats() {
            document.getElementById('totalBlocks').textContent = blocks.length;
            document.getElementById('selectedBlock').textContent = selectedBlockId || '-';
            document.getElementById('lockedBlocks').textContent = blocks.filter(b => b.locked).length;
        }

        function renderBlocks() {
            const container = document.getElementById('blocks-container');
            container.innerHTML = '';

            blocks.forEach((block, index) => {
                const blockElement = document.createElement('div');
                blockElement.className = 'block';
                blockElement.id = block.id;
                
                if (block.selected) blockElement.classList.add('selected');
                if (block.locked) blockElement.classList.add('locked');
                if (!block.visible) blockElement.classList.add('hidden');

                // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±–ª–æ–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                const headerElement = document.createElement('div');
                headerElement.className = 'block-header';
                headerElement.innerHTML = `
                    <div class="block-info">
                        <span class="block-type"><strong>${block.type}</strong></span>
                        <span class="block-id">${block.id.slice(-8)}</span>
                        ${block.locked ? '<span class="lock-icon">üîí</span>' : ''}
                        ${!block.visible ? '<span class="hidden-icon">üëÅÔ∏è‚Äçüó®Ô∏è</span>' : ''}
                    </div>
                    <div class="block-controls" style="display: ${block.selected ? 'flex' : 'none'}">
                        <button class="control-btn edit-btn" onclick="editBlock('${block.id}')" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
                        <button class="control-btn move-up-btn" onclick="moveBlockUp('${block.id}')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–≤–µ—Ä—Ö" ${index === 0 ? 'disabled' : ''}>‚¨ÜÔ∏è</button>
                        <button class="control-btn move-down-btn" onclick="moveBlockDown('${block.id}')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–Ω–∏–∑" ${index === blocks.length - 1 ? 'disabled' : ''}>‚¨áÔ∏è</button>
                        <button class="control-btn toggle-visibility-btn" onclick="toggleBlockVisibility('${block.id}')" title="${block.visible ? '–°–∫—Ä—ã—Ç—å' : '–ü–æ–∫–∞–∑–∞—Ç—å'}">${block.visible ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}</button>
                        <button class="control-btn toggle-lock-btn" onclick="toggleBlockLock('${block.id}')" title="${block.locked ? '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å' : '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å'}">${block.locked ? 'üîì' : 'üîí'}</button>
                        <button class="control-btn delete-btn" onclick="deleteBlock('${block.id}')" title="–£–¥–∞–ª–∏—Ç—å">üóëÔ∏è</button>
                    </div>
                `;

                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –±–ª–æ–∫–∞
                const contentElement = document.createElement('div');
                contentElement.className = 'block-content';

                // –†–µ–Ω–¥–µ—Ä–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ template
                if (block.template) {
                    let content = block.template;
                    Object.entries(block.props).forEach(([key, value]) => {
                        content = content.replace(new RegExp(`{{ props.${key} }}`, 'g'), value);
                    });
                    Object.entries(block.settings).forEach(([key, value]) => {
                        content = content.replace(new RegExp(`{{ settings.${key} }}`, 'g'), value);
                    });
                    contentElement.innerHTML = content;
                } else {
                    contentElement.textContent = block.props.content || block.type;
                }

                blockElement.appendChild(headerElement);
                blockElement.appendChild(contentElement);

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                blockElement.addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectBlock(block.id);
                });

                container.appendChild(blockElement);
            });
        }

        function selectBlock(blockId) {
            blocks.forEach(block => block.setSelected(block.id === blockId));
            selectedBlockId = blockId;
            updateStats();
            renderBlocks();
            
            const block = blocks.find(b => b.id === blockId);
            if (block) {
                log(`–í—ã–±—Ä–∞–Ω –±–ª–æ–∫: ${block.type} (${blockId})`, 'success');
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–∞–º–∏
        window.editBlock = function(blockId) {
            const block = blocks.find(b => b.id === blockId);
            if (!block) return;

            const formConfigs = {
                'text': {
                    title: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞',
                    description: '–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞',
                    fields: [
                        {
                            field: 'content',
                            label: '–¢–µ–∫—Å—Ç',
                            type: 'textarea',
                            placeholder: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç...',
                            rules: [
                                { type: 'required', field: 'content', message: '–¢–µ–∫—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è' },
                                { type: 'minLength', field: 'content', value: 1, message: '–¢–µ–∫—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
                            ],
                            defaultValue: block.props.content || ''
                        },
                        {
                            field: 'fontSize',
                            label: '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞',
                            type: 'number',
                            rules: [
                                { type: 'required', field: 'fontSize', message: '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'min', field: 'fontSize', value: 8, message: '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: 8px' },
                                { type: 'max', field: 'fontSize', value: 72, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: 72px' }
                            ],
                            defaultValue: parseInt(block.settings.fontSize) || 16
                        },
                        {
                            field: 'color',
                            label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'color', message: '–¶–≤–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.settings.color || '#333333'
                        },
                        {
                            field: 'textAlign',
                            label: '–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ',
                            type: 'select',
                            options: [
                                { value: 'left', label: '–ü–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é' },
                                { value: 'center', label: '–ü–æ —Ü–µ–Ω—Ç—Ä—É' },
                                { value: 'right', label: '–ü–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é' },
                                { value: 'justify', label: '–ü–æ —à–∏—Ä–∏–Ω–µ' }
                            ],
                            rules: [
                                { type: 'required', field: 'textAlign', message: '–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.textAlign || 'left'
                        }
                    ],
                    submitButtonText: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                },
                'image': {
                    title: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                    description: '–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–ª–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                    fields: [
                        {
                            field: 'src',
                            label: 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                            type: 'url',
                            placeholder: 'https://example.com/image.jpg',
                            rules: [
                                { type: 'required', field: 'src', message: 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'url', field: 'src', message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL' }
                            ],
                            defaultValue: block.props.src || ''
                        },
                        {
                            field: 'alt',
                            label: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç',
                            type: 'text',
                            placeholder: '–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                            rules: [
                                { type: 'required', field: 'alt', message: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.alt || ''
                        },
                        {
                            field: 'borderRadius',
                            label: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'borderRadius', value: 0, message: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'borderRadius', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ: 50px' }
                            ],
                            defaultValue: parseInt(block.settings.borderRadius) || 0
                        },
                        {
                            field: 'width',
                            label: '–®–∏—Ä–∏–Ω–∞',
                            type: 'number',
                            rules: [
                                { type: 'required', field: 'width', message: '–®–∏—Ä–∏–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' },
                                { type: 'min', field: 'width', value: 50, message: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 50px' },
                                { type: 'max', field: 'width', value: 1200, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 1200px' }
                            ],
                            defaultValue: 300
                        },
                        {
                            field: 'height',
                            label: '–í—ã—Å–æ—Ç–∞',
                            type: 'number',
                            rules: [
                                { type: 'required', field: 'height', message: '–í—ã—Å–æ—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' },
                                { type: 'min', field: 'height', value: 50, message: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞: 50px' },
                                { type: 'max', field: 'height', value: 800, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞: 800px' }
                            ],
                            defaultValue: 200
                        }
                    ],
                    submitButtonText: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                },
                'button': {
                    title: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏',
                    description: '–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–Ω–æ–ø–∫–∏',
                    fields: [
                        {
                            field: 'text',
                            label: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–ù–∞–∂–º–∏ –º–µ–Ω—è',
                            rules: [
                                { type: 'required', field: 'text', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'minLength', field: 'text', value: 1, message: '–¢–µ–∫—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
                            ],
                            defaultValue: block.props.text || '–ö–Ω–æ–ø–∫–∞'
                        },
                        {
                            field: 'backgroundColor',
                            label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'backgroundColor', message: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.settings.backgroundColor || '#007bff'
                        },
                        {
                            field: 'color',
                            label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'color', message: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.settings.color || '#ffffff'
                        },
                        {
                            field: 'borderRadius',
                            label: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'borderRadius', value: 0, message: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'borderRadius', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ: 50px' }
                            ],
                            defaultValue: parseInt(block.settings.borderRadius) || 4
                        },
                        {
                            field: 'padding',
                            label: '–û—Ç—Å—Ç—É–ø—ã',
                            type: 'text',
                            placeholder: '8px 16px',
                            rules: [
                                { type: 'required', field: 'padding', message: '–û—Ç—Å—Ç—É–ø—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã' }
                            ],
                            defaultValue: block.settings.padding || '8px 16px'
                        },
                        {
                            field: 'onClick',
                            label: '–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞',
                            type: 'text',
                            placeholder: 'alert("–ü—Ä–∏–≤–µ—Ç!")',
                            rules: [
                                { type: 'required', field: 'onClick', message: '–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.onClick || 'alert("–ü—Ä–∏–≤–µ—Ç!")'
                        }
                    ],
                    submitButtonText: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                },
                'cardlist': {
                    title: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                    description: '–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                    fields: [
                        {
                            field: 'title',
                            label: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞',
                            type: 'text',
                            placeholder: '–ù–∞—à–∏ —É—Å–ª—É–≥–∏',
                            rules: [
                                { type: 'required', field: 'title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'minLength', field: 'title', value: 1, message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
                            ],
                            defaultValue: block.props.title || '–ù–∞—à–∏ —É—Å–ª—É–≥–∏'
                        },
                        {
                            field: 'card1_title',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –ó–∞–≥–æ–ª–æ–≤–æ–∫',
                            type: 'text',
                            placeholder: '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞',
                            rules: [
                                { type: 'required', field: 'card1_title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[0] ? block.props.cards[0].title : '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞'
                        },
                        {
                            field: 'card1_text',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –û–ø–∏—Å–∞–Ω–∏–µ',
                            type: 'textarea',
                            placeholder: '–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π',
                            rules: [
                                { type: 'required', field: 'card1_text', message: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[0] ? block.props.cards[0].text : '–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π'
                        },
                        {
                            field: 'card1_button',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ',
                            rules: [
                                { type: 'required', field: 'card1_button', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[0] ? block.props.cards[0].button : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ'
                        },
                        {
                            field: 'card1_link',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –°—Å—ã–ª–∫–∞',
                            type: 'url',
                            placeholder: 'https://example.com',
                            rules: [
                                { type: 'required', field: 'card1_link', message: '–°—Å—ã–ª–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[0] ? block.props.cards[0].link : 'https://example.com'
                        },
                        {
                            field: 'card1_image',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                            type: 'url',
                            placeholder: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg',
                            rules: [
                                { type: 'required', field: 'card1_image', message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[0] ? block.props.cards[0].image : 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg'
                        },
                        {
                            field: 'card2_title',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –ó–∞–≥–æ–ª–æ–≤–æ–∫',
                            type: 'text',
                            placeholder: '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
                            rules: [
                                { type: 'required', field: 'card2_title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[1] ? block.props.cards[1].title : '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'
                        },
                        {
                            field: 'card2_text',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –û–ø–∏—Å–∞–Ω–∏–µ',
                            type: 'textarea',
                            placeholder: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è iOS –∏ Android',
                            rules: [
                                { type: 'required', field: 'card2_text', message: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[1] ? block.props.cards[1].text : '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è iOS –∏ Android'
                        },
                        {
                            field: 'card2_button',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ',
                            rules: [
                                { type: 'required', field: 'card2_button', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[1] ? block.props.cards[1].button : '–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ'
                        },
                        {
                            field: 'card2_link',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –°—Å—ã–ª–∫–∞',
                            type: 'url',
                            placeholder: 'https://example.com',
                            rules: [
                                { type: 'required', field: 'card2_link', message: '–°—Å—ã–ª–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[1] ? block.props.cards[1].link : 'https://example.com'
                        },
                        {
                            field: 'card2_image',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                            type: 'url',
                            placeholder: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg',
                            rules: [
                                { type: 'required', field: 'card2_image', message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[1] ? block.props.cards[1].image : 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg'
                        },
                        {
                            field: 'card3_title',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –ó–∞–≥–æ–ª–æ–≤–æ–∫',
                            type: 'text',
                            placeholder: '–î–∏–∑–∞–π–Ω',
                            rules: [
                                { type: 'required', field: 'card3_title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[2] ? block.props.cards[2].title : '–î–∏–∑–∞–π–Ω'
                        },
                        {
                            field: 'card3_text',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –û–ø–∏—Å–∞–Ω–∏–µ',
                            type: 'textarea',
                            placeholder: '–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–µ–Ω–¥–∞',
                            rules: [
                                { type: 'required', field: 'card3_text', message: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[2] ? block.props.cards[2].text : '–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–µ–Ω–¥–∞'
                        },
                        {
                            field: 'card3_button',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–±–æ—Ç—ã',
                            rules: [
                                { type: 'required', field: 'card3_button', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[2] ? block.props.cards[2].button : '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–±–æ—Ç—ã'
                        },
                        {
                            field: 'card3_link',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –°—Å—ã–ª–∫–∞',
                            type: 'url',
                            placeholder: 'https://example.com',
                            rules: [
                                { type: 'required', field: 'card3_link', message: '–°—Å—ã–ª–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[2] ? block.props.cards[2].link : 'https://example.com'
                        },
                        {
                            field: 'card3_image',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                            type: 'url',
                            placeholder: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg',
                            rules: [
                                { type: 'required', field: 'card3_image', message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: block.props.cards && block.props.cards[2] ? block.props.cards[2].image : 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg'
                        },
                        {
                            field: 'cardBackground',
                            label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'cardBackground', message: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.settings.cardBackground || '#ffffff'
                        },
                        {
                            field: 'cardTextColor',
                            label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'cardTextColor', message: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: block.settings.cardTextColor || '#333333'
                        },
                        {
                            field: 'cardBorderRadius',
                            label: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'cardBorderRadius', value: 0, message: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'cardBorderRadius', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ: 50px' }
                            ],
                            defaultValue: parseInt(block.settings.cardBorderRadius) || 8
                        },
                        {
                            field: 'columns',
                            label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫',
                            type: 'select',
                            options: [
                                { value: '1', label: '1 –∫–æ–ª–æ–Ω–∫–∞' },
                                { value: '2', label: '2 –∫–æ–ª–æ–Ω–∫–∏' },
                                { value: '3', label: '3 –∫–æ–ª–æ–Ω–∫–∏' },
                                { value: '4', label: '4 –∫–æ–ª–æ–Ω–∫–∏' }
                            ],
                            rules: [
                                { type: 'required', field: 'columns', message: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: String(block.settings.columns || '3')
                        },
                        {
                            field: 'gap',
                            label: '–û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'gap', value: 0, message: '–û—Ç—Å—Ç—É–ø –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'gap', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø: 50px' }
                            ],
                            defaultValue: parseInt(block.settings.gap) || 16
                        }
                    ],
                    submitButtonText: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                }
            };

            const config = formConfigs[block.type];
            if (!config) {
                log(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –±–ª–æ–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${block.type}`, 'error');
                return;
            }

            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.createElement('div');
            modal.className = 'form-modal';
            modal.innerHTML = `
                <div class="form-dialog-overlay">
                    <div class="form-dialog">
                        <div class="form-dialog-header">
                            <h3>${config.title}</h3>
                            <button class="close-btn" onclick="this.closest('.form-dialog-overlay').remove()">√ó</button>
                        </div>
                        <div class="form-dialog-content">
                            <p class="form-description">${config.description}</p>
                            <div id="form-container"></div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–æ—Ä–º—É
            const formContainer = modal.querySelector('#form-container');
            const formHtml = generateFormHTML(config, (data) => {
                updateBlockFromFormData(blockId, data);
                modal.remove();
            });
            formContainer.innerHTML = formHtml;
        };

        window.deleteBlock = function(blockId) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –±–ª–æ–∫?')) {
                blocks = blocks.filter(b => b.id !== blockId);
                if (selectedBlockId === blockId) {
                    selectedBlockId = null;
                }
                updateStats();
                renderBlocks();
                log(`–ë–ª–æ–∫ —É–¥–∞–ª–µ–Ω: ${blockId}`, 'error');
            }
        };

        window.moveBlockUp = function(blockId) {
            const index = blocks.findIndex(b => b.id === blockId);
            if (index > 0) {
                const block = blocks.splice(index, 1)[0];
                blocks.splice(index - 1, 0, block);
                renderBlocks();
                log(`–ë–ª–æ–∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤–≤–µ—Ä—Ö: ${blockId}`, 'info');
            }
        };

        window.moveBlockDown = function(blockId) {
            const index = blocks.findIndex(b => b.id === blockId);
            if (index < blocks.length - 1) {
                const block = blocks.splice(index, 1)[0];
                blocks.splice(index + 1, 0, block);
                renderBlocks();
                log(`–ë–ª–æ–∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤–Ω–∏–∑: ${blockId}`, 'info');
            }
        };

        window.toggleBlockVisibility = function(blockId) {
            const block = blocks.find(b => b.id === blockId);
            if (block) {
                block.setVisible(!block.visible);
                renderBlocks();
                log(`–í–∏–¥–∏–º–æ—Å—Ç—å –±–ª–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞: ${block.visible}`, 'info');
            }
        };

        window.toggleBlockLock = function(blockId) {
            const block = blocks.find(b => b.id === blockId);
            if (block) {
                block.setLocked(!block.locked);
                renderBlocks();
                log(`–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–ª–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞: ${block.locked}`, 'info');
            }
        };

        function updateBlockFromFormData(blockId, data) {
            const block = blocks.find(b => b.id === blockId);
            if (!block) return;

            switch (block.type) {
                case 'text':
                    block.settings = {
                        fontSize: data.fontSize + 'px',
                        color: data.color
                    };
                    block.props = {
                        content: data.content,
                        textAlign: data.textAlign
                    };
                    block.template = `<div style="text-align: ${data.textAlign}; font-size: ${data.fontSize}px; color: ${data.color}; padding: 10px;">${data.content}</div>`;
                    break;
                case 'image':
                    block.settings = {
                        borderRadius: data.borderRadius + 'px'
                    };
                    block.props = {
                        src: data.src,
                        alt: data.alt
                    };
                    block.template = `<img src="${data.src}" alt="${data.alt}" style="border-radius: ${data.borderRadius}px; width: 100%; height: 100%; object-fit: cover;" />`;
                    break;
                case 'button':
                    block.settings = {
                        backgroundColor: data.backgroundColor,
                        color: data.color,
                        borderRadius: data.borderRadius + 'px',
                        padding: data.padding
                    };
                    block.props = {
                        text: data.text,
                        onClick: data.onClick
                    };
                    block.template = `<button onclick="${data.onClick}" style="background-color: ${data.backgroundColor}; color: ${data.color}; border-radius: ${data.borderRadius}px; padding: ${data.padding}; border: none; cursor: pointer; transition: all 0.2s;">${data.text}</button>`;
                    break;
                case 'cardlist':
                    const cards = [
                        {
                            title: data.card1_title,
                            text: data.card1_text,
                            button: data.card1_button,
                            link: data.card1_link,
                            image: data.card1_image
                        },
                        {
                            title: data.card2_title,
                            text: data.card2_text,
                            button: data.card2_button,
                            link: data.card2_link,
                            image: data.card2_image
                        },
                        {
                            title: data.card3_title,
                            text: data.card3_text,
                            button: data.card3_button,
                            link: data.card3_link,
                            image: data.card3_image
                        }
                    ];
                    
                    const cardsHtml = cards.map(card => 
                        `<div class="card-item" style="background: ${data.cardBackground}; color: ${data.cardTextColor}; border-radius: ${data.cardBorderRadius}px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s; border: 2px solid #e9ecef; cursor: pointer;" onclick="showCardModal(this)">
                            <div class="card-image" style="margin-bottom: 15px;">
                                <img src="${card.image}" alt="${card.title}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px;" />
                            </div>
                            <h3 style="margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">${card.title}</h3>
                            <p style="margin: 0 0 15px 0; opacity: 0.8; line-height: 1.5;">${card.text}</p>
                            <a href="${card.link}" target="_blank" style="display: inline-block; background: #007bff; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-size: 14px; transition: background 0.2s;">${card.button}</a>
                        </div>`
                    ).join('');
                    
                    block.settings = {
                        cardBackground: data.cardBackground,
                        cardTextColor: data.cardTextColor,
                        cardBorderRadius: data.cardBorderRadius + 'px',
                        columns: data.columns,
                        gap: data.gap + 'px'
                    };
                    block.props = {
                        title: data.title,
                        cards: cards
                    };
                    block.template = `
                        <div class="card-list-container" style="margin: 20px 0;">
                            <h2 style="text-align: center; margin-bottom: 30px; color: #333; font-size: 28px; font-weight: 700;">${data.title}</h2>
                            <div class="card-grid" style="display: grid; grid-template-columns: repeat(${data.columns}, 1fr); gap: ${data.gap}px;">
                                ${cardsHtml}
                            </div>
                        </div>
                    `;
                    break;
            }

            renderBlocks();
            log(`–ë–ª–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω: ${blockId}`, 'success');
        }

        // –§—É–Ω–∫—Ü–∏—è drag & drop —É–¥–∞–ª–µ–Ω–∞ - –±–ª–æ–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –∫–∞–∫ —Å–µ–∫—Ü–∏–∏ —Å–∞–π—Ç–∞

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        window.closeModal = function(button) {
            const modal = button.closest('.form-modal');
            if (modal) {
                modal.remove();
            }
        };

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ä–º–∞–º–∏
        window.showCreateForm = function(blockType) {
            const formConfigs = {
                'text': {
                    title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞',
                    description: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞',
                    fields: [
                        {
                            field: 'content',
                            label: '–¢–µ–∫—Å—Ç',
                            type: 'textarea',
                            placeholder: '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç...',
                            rules: [
                                { type: 'required', field: 'content', message: '–¢–µ–∫—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è' },
                                { type: 'minLength', field: 'content', value: 1, message: '–¢–µ–∫—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
                            ],
                            defaultValue: ''
                        },
                        {
                            field: 'fontSize',
                            label: '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞',
                            type: 'number',
                            rules: [
                                { type: 'required', field: 'fontSize', message: '–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'min', field: 'fontSize', value: 8, message: '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: 8px' },
                                { type: 'max', field: 'fontSize', value: 72, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: 72px' }
                            ],
                            defaultValue: 16
                        },
                        {
                            field: 'color',
                            label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'color', message: '–¶–≤–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '#333333'
                        },
                        {
                            field: 'textAlign',
                            label: '–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ',
                            type: 'select',
                            options: [
                                { value: 'left', label: '–ü–æ –ª–µ–≤–æ–º—É –∫—Ä–∞—é' },
                                { value: 'center', label: '–ü–æ —Ü–µ–Ω—Ç—Ä—É' },
                                { value: 'right', label: '–ü–æ –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é' },
                                { value: 'justify', label: '–ü–æ —à–∏—Ä–∏–Ω–µ' }
                            ],
                            rules: [
                                { type: 'required', field: 'textAlign', message: '–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: 'left'
                        }
                    ],
                    submitButtonText: '–°–æ–∑–¥–∞—Ç—å –±–ª–æ–∫',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                },
                'image': {
                    title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–ª–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                    description: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–ª–æ–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                    fields: [
                        {
                            field: 'src',
                            label: 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                            type: 'url',
                            placeholder: 'https://example.com/image.jpg',
                            rules: [
                                { type: 'required', field: 'src', message: 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'url', field: 'src', message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL' }
                            ],
                            defaultValue: ''
                        },
                        {
                            field: 'alt',
                            label: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç',
                            type: 'text',
                            placeholder: '–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è',
                            rules: [
                                { type: 'required', field: 'alt', message: '–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: ''
                        },
                        {
                            field: 'borderRadius',
                            label: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'borderRadius', value: 0, message: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'borderRadius', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ: 50px' }
                            ],
                            defaultValue: 0
                        },
                        {
                            field: 'width',
                            label: '–®–∏—Ä–∏–Ω–∞',
                            type: 'number',
                            rules: [
                                { type: 'required', field: 'width', message: '–®–∏—Ä–∏–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' },
                                { type: 'min', field: 'width', value: 50, message: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 50px' },
                                { type: 'max', field: 'width', value: 1200, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞: 1200px' }
                            ],
                            defaultValue: 300
                        },
                        {
                            field: 'height',
                            label: '–í—ã—Å–æ—Ç–∞',
                            type: 'number',
                            rules: [
                                { type: 'required', field: 'height', message: '–í—ã—Å–æ—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' },
                                { type: 'min', field: 'height', value: 50, message: '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞: 50px' },
                                { type: 'max', field: 'height', value: 800, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞: 800px' }
                            ],
                            defaultValue: 200
                        }
                    ],
                    submitButtonText: '–°–æ–∑–¥–∞—Ç—å –±–ª–æ–∫',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                },
                'button': {
                    title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏',
                    description: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–Ω–æ–ø–∫–∏',
                    fields: [
                        {
                            field: 'text',
                            label: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–ù–∞–∂–º–∏ –º–µ–Ω—è',
                            rules: [
                                { type: 'required', field: 'text', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'minLength', field: 'text', value: 1, message: '–¢–µ–∫—Å—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
                            ],
                            defaultValue: '–ö–Ω–æ–ø–∫–∞'
                        },
                        {
                            field: 'backgroundColor',
                            label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'backgroundColor', message: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '#007bff'
                        },
                        {
                            field: 'color',
                            label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'color', message: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '#ffffff'
                        },
                        {
                            field: 'borderRadius',
                            label: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'borderRadius', value: 0, message: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'borderRadius', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ: 50px' }
                            ],
                            defaultValue: 4
                        },
                        {
                            field: 'padding',
                            label: '–û—Ç—Å—Ç—É–ø—ã',
                            type: 'text',
                            placeholder: '8px 16px',
                            rules: [
                                { type: 'required', field: 'padding', message: '–û—Ç—Å—Ç—É–ø—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã' }
                            ],
                            defaultValue: '8px 16px'
                        },
                        {
                            field: 'onClick',
                            label: '–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞',
                            type: 'text',
                            placeholder: 'alert("–ü—Ä–∏–≤–µ—Ç!")',
                            rules: [
                                { type: 'required', field: 'onClick', message: '–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: 'alert("–ü—Ä–∏–≤–µ—Ç!")'
                        }
                    ],
                    submitButtonText: '–°–æ–∑–¥–∞—Ç—å –∫–Ω–æ–ø–∫—É',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                },
                'cardlist': {
                    title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                    description: '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–ø–∏—Å–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                    fields: [
                        {
                            field: 'title',
                            label: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–ø–∏—Å–∫–∞',
                            type: 'text',
                            placeholder: '–ù–∞—à–∏ —É—Å–ª—É–≥–∏',
                            rules: [
                                { type: 'required', field: 'title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' },
                                { type: 'minLength', field: 'title', value: 1, message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º' }
                            ],
                            defaultValue: '–ù–∞—à–∏ —É—Å–ª—É–≥–∏'
                        },
                        {
                            field: 'card1_title',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –ó–∞–≥–æ–ª–æ–≤–æ–∫',
                            type: 'text',
                            placeholder: '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞',
                            rules: [
                                { type: 'required', field: 'card1_title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞'
                        },
                        {
                            field: 'card1_text',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –û–ø–∏—Å–∞–Ω–∏–µ',
                            type: 'textarea',
                            placeholder: '–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π',
                            rules: [
                                { type: 'required', field: 'card1_text', message: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: '–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π'
                        },
                        {
                            field: 'card1_button',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ',
                            rules: [
                                { type: 'required', field: 'card1_button', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ'
                        },
                        {
                            field: 'card1_link',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –°—Å—ã–ª–∫–∞',
                            type: 'url',
                            placeholder: 'https://example.com',
                            rules: [
                                { type: 'required', field: 'card1_link', message: '–°—Å—ã–ª–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' }
                            ],
                            defaultValue: 'https://example.com'
                        },
                        {
                            field: 'card1_image',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 1 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                            type: 'url',
                            placeholder: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg',
                            rules: [
                                { type: 'required', field: 'card1_image', message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg'
                        },
                        {
                            field: 'card2_title',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –ó–∞–≥–æ–ª–æ–≤–æ–∫',
                            type: 'text',
                            placeholder: '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
                            rules: [
                                { type: 'required', field: 'card2_title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'
                        },
                        {
                            field: 'card2_text',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –û–ø–∏—Å–∞–Ω–∏–µ',
                            type: 'textarea',
                            placeholder: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è iOS –∏ Android',
                            rules: [
                                { type: 'required', field: 'card2_text', message: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è iOS –∏ Android'
                        },
                        {
                            field: 'card2_button',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ',
                            rules: [
                                { type: 'required', field: 'card2_button', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ'
                        },
                        {
                            field: 'card2_link',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –°—Å—ã–ª–∫–∞',
                            type: 'url',
                            placeholder: 'https://example.com',
                            rules: [
                                { type: 'required', field: 'card2_link', message: '–°—Å—ã–ª–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' }
                            ],
                            defaultValue: 'https://example.com'
                        },
                        {
                            field: 'card2_image',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 2 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                            type: 'url',
                            placeholder: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg',
                            rules: [
                                { type: 'required', field: 'card2_image', message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg'
                        },
                        {
                            field: 'card3_title',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –ó–∞–≥–æ–ª–æ–≤–æ–∫',
                            type: 'text',
                            placeholder: '–î–∏–∑–∞–π–Ω',
                            rules: [
                                { type: 'required', field: 'card3_title', message: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '–î–∏–∑–∞–π–Ω'
                        },
                        {
                            field: 'card3_text',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –û–ø–∏—Å–∞–Ω–∏–µ',
                            type: 'textarea',
                            placeholder: '–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–µ–Ω–¥–∞',
                            rules: [
                                { type: 'required', field: 'card3_text', message: '–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: '–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–µ–Ω–¥–∞'
                        },
                        {
                            field: 'card3_button',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏',
                            type: 'text',
                            placeholder: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–±–æ—Ç—ã',
                            rules: [
                                { type: 'required', field: 'card3_button', message: '–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–±–æ—Ç—ã'
                        },
                        {
                            field: 'card3_link',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –°—Å—ã–ª–∫–∞',
                            type: 'url',
                            placeholder: 'https://example.com',
                            rules: [
                                { type: 'required', field: 'card3_link', message: '–°—Å—ã–ª–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞' }
                            ],
                            defaultValue: 'https://example.com'
                        },
                        {
                            field: 'card3_image',
                            label: '–ö–∞—Ä—Ç–æ—á–∫–∞ 3 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ',
                            type: 'url',
                            placeholder: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg',
                            rules: [
                                { type: 'required', field: 'card3_image', message: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: 'https://i.pinimg.com/736x/ca/9a/12/ca9a123b7269fba0574726629bad42b9.jpg'
                        },
                        {
                            field: 'cardBackground',
                            label: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'cardBackground', message: '–¶–≤–µ—Ç —Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '#ffffff'
                        },
                        {
                            field: 'cardTextColor',
                            label: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –∫–∞—Ä—Ç–æ—á–µ–∫',
                            type: 'color',
                            rules: [
                                { type: 'required', field: 'cardTextColor', message: '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' }
                            ],
                            defaultValue: '#333333'
                        },
                        {
                            field: 'cardBorderRadius',
                            label: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'cardBorderRadius', value: 0, message: '–°–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'cardBorderRadius', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ: 50px' }
                            ],
                            defaultValue: 8
                        },
                        {
                            field: 'columns',
                            label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫',
                            type: 'select',
                            options: [
                                { value: '1', label: '1 –∫–æ–ª–æ–Ω–∫–∞' },
                                { value: '2', label: '2 –∫–æ–ª–æ–Ω–∫–∏' },
                                { value: '3', label: '3 –∫–æ–ª–æ–Ω–∫–∏' },
                                { value: '4', label: '4 –∫–æ–ª–æ–Ω–∫–∏' }
                            ],
                            rules: [
                                { type: 'required', field: 'columns', message: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ' }
                            ],
                            defaultValue: '3'
                        },
                        {
                            field: 'gap',
                            label: '–û—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏',
                            type: 'number',
                            rules: [
                                { type: 'min', field: 'gap', value: 0, message: '–û—Ç—Å—Ç—É–ø –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º' },
                                { type: 'max', field: 'gap', value: 50, message: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø: 50px' }
                            ],
                            defaultValue: 16
                        }
                    ],
                    submitButtonText: '–°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫',
                    cancelButtonText: '–û—Ç–º–µ–Ω–∞'
                }
            };

            const config = formConfigs[blockType];
            if (!config) {
                log(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –±–ª–æ–∫–∞: ${blockType}`, 'error');
                return;
            }

            // –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
            const existingModals = document.querySelectorAll('.form-modal');
            existingModals.forEach(modal => modal.remove());

            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.createElement('div');
            modal.className = 'form-modal';
            modal.innerHTML = `
                <div class="form-dialog-overlay">
                    <div class="form-dialog">
                        <div class="form-dialog-header">
                            <h3>${config.title}</h3>
                            <button class="close-btn" onclick="closeModal(this)">√ó</button>
                        </div>
                        <div class="form-dialog-content">
                            <p class="form-description">${config.description}</p>
                            <div id="form-container"></div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ overlay
            const overlay = modal.querySelector('.form-dialog-overlay');
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    modal.remove();
                }
            });

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–æ—Ä–º—É
            const formContainer = modal.querySelector('#form-container');
            const formHtml = generateFormHTML(config, (data) => {
                createBlockFromFormData(blockType, data);
                modal.remove();
            });
            formContainer.innerHTML = formHtml;
        };

        function generateFormHTML(config, onSubmit) {
            const formId = `form_${Date.now()}`;
            
            let html = `
                <form id="${formId}" class="naberika-form">
                    <div class="form-fields">
            `;

            let currentCard = null;
            let cardSectionOpen = false;

            for (const field of config.fields) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–∏ –Ω–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
                const cardMatch = field.field.match(/^card(\d+)_/);
                
                if (cardMatch) {
                    const cardNumber = cardMatch[1];
                    
                    // –ï—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å–µ–∫—Ü–∏—é –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–æ–≤—É—é
                    if (currentCard !== cardNumber) {
                        if (cardSectionOpen) {
                            html += `</div>`;
                        }
                        html += `<div class="card-section"><h4>–ö–∞—Ä—Ç–æ—á–∫–∞ ${cardNumber}</h4>`;
                        currentCard = cardNumber;
                        cardSectionOpen = true;
                    }
                } else {
                    // –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–æ–ª–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏ –µ—Å–ª–∏ –æ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
                    if (cardSectionOpen) {
                        html += `</div>`;
                        cardSectionOpen = false;
                        currentCard = null;
                    }
                }
                
                html += generateFieldHTML(field);
            }

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ–∫—Ü–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏ –µ—Å–ª–∏ –æ–Ω–∞ –æ—Å—Ç–∞–ª–∞—Å—å –æ—Ç–∫—Ä—ã—Ç–æ–π
            if (cardSectionOpen) {
                html += `</div>`;
            }

            html += `
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">${config.submitButtonText}</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal(this)">${config.cancelButtonText}</button>
                    </div>
                </form>
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã
            setTimeout(() => {
                const form = document.getElementById(formId);
                if (form) {
                    form.addEventListener('submit', function(e) {
                        e.preventDefault();
                        handleFormSubmit(e, config.fields, onSubmit);
                    });
                }
            }, 0);

            return html;
        }

        function generateFieldHTML(field) {
            const fieldId = `field_${field.field}`;
            
            switch (field.type) {
                case 'textarea':
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            <textarea id="${fieldId}" name="${field.field}" placeholder="${field.placeholder || ''}" class="form-control">${field.defaultValue || ''}</textarea>
                            <div class="field-errors" id="errors_${field.field}"></div>
                        </div>
                    `;
                case 'select':
                    const options = field.options?.map(opt => {
                        const isSelected = opt.value === field.defaultValue || 
                                        String(opt.value) === String(field.defaultValue);
                        return `<option value="${opt.value}" ${isSelected ? 'selected' : ''}>${opt.label}</option>`;
                    }).join('') || '';
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            <select id="${fieldId}" name="${field.field}" class="form-control">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                                ${options}
                            </select>
                            <div class="field-errors" id="errors_${field.field}"></div>
                        </div>
                    `;
                case 'checkbox':
                    return `
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="${fieldId}" name="${field.field}" ${field.defaultValue ? 'checked' : ''} class="form-checkbox" />
                                ${field.label}
                            </label>
                            <div class="field-errors" id="errors_${field.field}"></div>
                        </div>
                    `;
                case 'color':
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            <input type="color" id="${fieldId}" name="${field.field}" value="${field.defaultValue || '#000000'}" class="form-control" />
                            <div class="field-errors" id="errors_${field.field}"></div>
                        </div>
                    `;
                default:
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            <input type="${field.type}" id="${fieldId}" name="${field.field}" placeholder="${field.placeholder || ''}" value="${field.defaultValue || ''}" class="form-control" />
                            <div class="field-errors" id="errors_${field.field}"></div>
                        </div>
                    `;
            }
        }

        function handleFormSubmit(event, fields, onSubmit) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            let isValid = true;
            for (const field of fields) {
                const value = data[field.field];
                const errors = validateField(field, value);
                
                if (errors.length > 0) {
                    showFieldErrors(field.field, errors);
                    isValid = false;
                } else {
                    clearFieldErrors(field.field);
                }
            }
            
            if (isValid) {
                onSubmit(data);
            }
        }

        // –ò–º–ø–æ—Ä—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ)
        // import { UniversalValidator } from '../utils/universalValidation.js';
        
        // –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        const UniversalValidator = {
            validateField: function(value, rules) {
                const errors = [];
                
                for (const rule of rules) {
                    switch (rule.type) {
                        case 'required':
                            if (value === null || value === undefined || value === '') {
                                errors.push(rule.message);
                            }
                            break;
                        case 'email':
                            if (value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
                                errors.push(rule.message);
                            }
                            break;
                        case 'url':
                            if (value) {
                                try {
                                    new URL(value);
                                } catch {
                                    errors.push(rule.message);
                                }
                            }
                            break;
                        case 'min':
                            if (value !== null && value !== undefined && parseFloat(value) < rule.value) {
                                errors.push(rule.message);
                            }
                            break;
                        case 'max':
                            if (value !== null && value !== undefined && parseFloat(value) > rule.value) {
                                errors.push(rule.message);
                            }
                            break;
                        case 'minLength':
                            if (value && value.length < rule.value) {
                                errors.push(rule.message);
                            }
                            break;
                        case 'maxLength':
                            if (value && value.length > rule.value) {
                                errors.push(rule.message);
                            }
                            break;
                    }
                }
                
                return errors;
            }
        };

        function validateField(field, value) {
            return UniversalValidator.validateField(value, field.rules);
        }

        function showFieldErrors(fieldName, errors) {
            const errorContainer = document.getElementById('errors_' + fieldName);
            if (errorContainer) {
                errorContainer.innerHTML = errors.map(error => `<div class="error">${error}</div>`).join('');
            }
            
            const field = document.querySelector(`[name="${fieldName}"]`);
            if (field) {
                field.classList.add('error');
            }
        }

        function clearFieldErrors(fieldName) {
            const errorContainer = document.getElementById('errors_' + fieldName);
            if (errorContainer) {
                errorContainer.innerHTML = '';
            }
            
            const field = document.querySelector(`[name="${fieldName}"]`);
            if (field) {
                field.classList.remove('error');
            }
        }

        function createBlockFromFormData(blockType, data) {
            const block = new SimpleBlock({
                type: blockType,
                settings: {},
                props: {},
                template: '',
                visible: true,
                locked: false
            });

            switch (blockType) {
                case 'text':
                    block.settings = {
                        fontSize: data.fontSize + 'px',
                        color: data.color
                    };
                    block.props = {
                        content: data.content,
                        textAlign: data.textAlign
                    };
                    block.template = `<div style="text-align: ${data.textAlign}; font-size: ${data.fontSize}px; color: ${data.color}; padding: 10px;">${data.content}</div>`;
                    break;
                case 'image':
                    block.settings = {
                        borderRadius: data.borderRadius + 'px'
                    };
                    block.props = {
                        src: data.src,
                        alt: data.alt
                    };
                    block.template = `<img src="${data.src}" alt="${data.alt}" style="border-radius: ${data.borderRadius}px; width: 100%; height: 100%; object-fit: cover;" />`;
                    break;
                case 'button':
                    block.settings = {
                        backgroundColor: data.backgroundColor,
                        color: data.color,
                        borderRadius: data.borderRadius + 'px',
                        padding: data.padding
                    };
                    block.props = {
                        text: data.text,
                        onClick: data.onClick
                    };
                    block.template = `<button onclick="${data.onClick}" style="background-color: ${data.backgroundColor}; color: ${data.color}; border-radius: ${data.borderRadius}px; padding: ${data.padding}; border: none; cursor: pointer; transition: all 0.2s;">${data.text}</button>`;
                    break;
                case 'cardlist':
                    const cards = [
                        {
                            title: data.card1_title,
                            text: data.card1_text,
                            button: data.card1_button,
                            link: data.card1_link,
                            image: data.card1_image
                        },
                        {
                            title: data.card2_title,
                            text: data.card2_text,
                            button: data.card2_button,
                            link: data.card2_link,
                            image: data.card2_image
                        },
                        {
                            title: data.card3_title,
                            text: data.card3_text,
                            button: data.card3_button,
                            link: data.card3_link,
                            image: data.card3_image
                        }
                    ];
                    
                    const cardsHtml = cards.map(card => 
                        `<div class="card-item" style="background: ${data.cardBackground}; color: ${data.cardTextColor}; border-radius: ${data.cardBorderRadius}px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s; border: 2px solid #e9ecef; cursor: pointer;" onclick="showCardModal(this)">
                            <div class="card-image" style="margin-bottom: 15px;">
                                <img src="${card.image}" alt="${card.title}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px;" />
                            </div>
                            <h3 style="margin: 0 0 10px 0; font-size: 18px; font-weight: 600;">${card.title}</h3>
                            <p style="margin: 0 0 15px 0; opacity: 0.8; line-height: 1.5;">${card.text}</p>
                            <a href="${card.link}" target="_blank" style="display: inline-block; background: #007bff; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px; font-size: 14px; transition: background 0.2s;">${card.button}</a>
                        </div>`
                    ).join('');
                    
                    block.settings = {
                        cardBackground: data.cardBackground,
                        cardTextColor: data.cardTextColor,
                        cardBorderRadius: data.cardBorderRadius + 'px',
                        columns: data.columns,
                        gap: data.gap + 'px'
                    };
                    block.props = {
                        title: data.title,
                        cards: cards
                    };
                    block.template = `
                        <div class="card-list-container" style="margin: 20px 0;">
                            <h2 style="text-align: center; margin-bottom: 30px; color: #333; font-size: 28px; font-weight: 700;">${data.title}</h2>
                            <div class="card-grid" style="display: grid; grid-template-columns: repeat(${data.columns}, 1fr); gap: ${data.gap}px;">
                                ${cardsHtml}
                            </div>
                        </div>
                    `;
                    break;
            }

            blocks.push(block);
            selectBlock(block.id);
            updateStats();
            renderBlocks();
            log(`–î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ ${blockType}: ${block.id}`, 'success');
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–æ–≤ (—Å—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        window.addTextBlock = function() {
            const block = new SimpleBlock({
                type: 'text',
                settings: {
                    fontSize: '16px',
                    color: '#333',
                    backgroundColor: '#f8f9fa',
                    padding: '10px',
                    borderRadius: '4px',
                    border: '1px solid #dee2e6'
                },
                props: {
                    content: '–¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫',
                    textAlign: 'center'
                },
                template: '<div style="text-align: {{ props.textAlign }}; font-size: {{ settings.fontSize }}; color: {{ settings.color }};">{{ props.content }}</div>',
            });

            blocks.push(block);
            selectBlock(block.id);
            updateStats();
            renderBlocks();
            log(`–î–æ–±–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫: ${block.id}`, 'success');
        };

        window.addImageBlock = function() {
            const block = new SimpleBlock({
                type: 'image',
                settings: {
                    border: '2px solid #007bff',
                    borderRadius: '8px',
                    overflow: 'hidden'
                },
                props: {
                    src: 'https://via.placeholder.com/200x150/007bff/ffffff?text=Image',
                    alt: 'Placeholder Image'
                },
                template: '<img src="{{ props.src }}" alt="{{ props.alt }}" style="width: 100%; height: 100%; object-fit: cover;">',
            });

            blocks.push(block);
            selectBlock(block.id);
            updateStats();
            renderBlocks();
            log(`–î–æ–±–∞–≤–ª–µ–Ω –±–ª–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ${block.id}`, 'success');
        };

        window.addButtonBlock = function() {
            const block = new SimpleBlock({
                type: 'button',
                settings: {
                    backgroundColor: '#007bff',
                    color: 'white',
                    border: 'none',
                    borderRadius: '6px',
                    cursor: 'pointer',
                    fontSize: '14px',
                    fontWeight: '600'
                },
                props: {
                    text: '–ù–∞–∂–º–∏ –º–µ–Ω—è!',
                    variant: 'primary'
                },
                template: '<button style="width: 100%; height: 100%; background-color: {{ settings.backgroundColor }}; color: {{ settings.color }}; border: {{ settings.border }}; border-radius: {{ settings.borderRadius }}; cursor: {{ settings.cursor }}; font-size: {{ settings.fontSize }}; font-weight: {{ settings.fontWeight }};">{{ props.text }}</button>',
            });

            blocks.push(block);
            selectBlock(block.id);
            updateStats();
            renderBlocks();
            log(`–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞: ${block.id}`, 'success');
        };

        window.addContainerBlock = function() {
            const block = new SimpleBlock({
                type: 'container',
                settings: {
                    backgroundColor: '#f8f9fa',
                    border: '2px dashed #6c757d',
                    borderRadius: '8px',
                    padding: '20px'
                },
                props: {
                    title: '–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä',
                    content: '–≠—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥—Ä—É–≥–∏—Ö –±–ª–æ–∫–æ–≤'
                },
                template: '<div style="text-align: center;"><h3 style="margin: 0 0 10px 0; color: #333;">{{ props.title }}</h3><p style="margin: 0; color: #666;">{{ props.content }}</p></div>',
            });

            blocks.push(block);
            selectBlock(block.id);
            updateStats();
            renderBlocks();
            log(`–î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: ${block.id}`, 'success');
        };

        window.clearAllBlocks = function() {
            blocks = [];
            selectedBlockId = null;
            updateStats();
            renderBlocks();
            log('–í—Å–µ –±–ª–æ–∫–∏ —É–¥–∞–ª–µ–Ω—ã', 'warning');
        };

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.addEventListener('keydown', (e) => {
            if (selectedBlockId) {
                const block = blocks.find(b => b.id === selectedBlockId);
                if (!block) return;

                switch(e.key) {
                    case 'Delete':
                    case 'Backspace':
                        blocks = blocks.filter(b => b.id !== selectedBlockId);
                        selectedBlockId = null;
                        updateStats();
                        renderBlocks();
                        log('–ë–ª–æ–∫ —É–¥–∞–ª–µ–Ω', 'error');
                        break;
                    case 'l':
                    case 'L':
                        block.setLocked(!block.locked);
                        renderBlocks();
                        log(`–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∞: ${block.locked}`, 'info');
                        break;
                    case 'h':
                    case 'H':
                        block.setVisible(!block.visible);
                        renderBlocks();
                        log(`–í–∏–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞: ${block.visible}`, 'info');
                        break;
                }
            }
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
        window.showCardModal = function(cardElement) {
            const title = cardElement.querySelector('h3')?.textContent || '';
            const text = cardElement.querySelector('p')?.textContent || '';
            const button = cardElement.querySelector('a')?.textContent || '';
            const link = cardElement.querySelector('a')?.getAttribute('href') || '';
            const image = cardElement.querySelector('img')?.getAttribute('src') || '';
            
            const card = { title, text, button, link, image };
            
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.createElement('div');
            modal.className = 'card-modal-overlay';
            modal.innerHTML = `
                <div class="card-modal-content">
                    <div class="card-modal-header">
                        <h3>${card.title}</h3>
                        <button class="card-modal-close" onclick="this.closest('.card-modal-overlay').remove()">√ó</button>
                    </div>
                    <div class="card-modal-body">
                        <div class="card-modal-image">
                            <img src="${card.image}" alt="${card.title}" />
                        </div>
                        <div class="card-modal-details">
                            <h4>${card.title}</h4>
                            <p>${card.text}</p>
                            <a href="${card.link}" target="_blank" class="card-modal-button">${card.button}</a>
                        </div>
                    </div>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const style = document.createElement('style');
            style.textContent = `
                .card-modal-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.6);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                    backdrop-filter: blur(4px);
                }
                .card-modal-content {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                    max-width: 600px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                    animation: modalSlideIn 0.3s ease-out;
                }
                @keyframes modalSlideIn {
                    from { opacity: 0; transform: scale(0.9) translateY(-20px); }
                    to { opacity: 1; transform: scale(1) translateY(0); }
                }
                .card-modal-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 20px 24px;
                    border-bottom: 1px solid #e9ecef;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border-radius: 12px 12px 0 0;
                }
                .card-modal-header h3 {
                    margin: 0;
                    font-size: 1.5rem;
                    font-weight: 600;
                }
                .card-modal-close {
                    background: none;
                    border: none;
                    font-size: 24px;
                    cursor: pointer;
                    color: white;
                    padding: 0;
                    width: 32px;
                    height: 32px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 50%;
                    transition: all 0.2s;
                }
                .card-modal-close:hover {
                    background: rgba(255, 255, 255, 0.2);
                    transform: scale(1.1);
                }
                .card-modal-body {
                    padding: 24px;
                }
                .card-modal-image {
                    margin-bottom: 20px;
                    border-radius: 8px;
                    overflow: hidden;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                }
                .card-modal-image img {
                    width: 100%;
                    height: 200px;
                    object-fit: cover;
                    display: block;
                }
                .card-modal-details h4 {
                    margin: 0 0 12px 0;
                    font-size: 1.25rem;
                    font-weight: 600;
                    color: #333;
                }
                .card-modal-details p {
                    margin: 0 0 20px 0;
                    color: #666;
                    line-height: 1.6;
                    font-size: 1rem;
                }
                .card-modal-button {
                    display: inline-block;
                    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                    color: white;
                    padding: 12px 24px;
                    text-decoration: none;
                    border-radius: 8px;
                    font-weight: 600;
                    font-size: 1rem;
                    transition: all 0.3s ease;
                    box-shadow: 0 4px 12px rgba(79, 172, 254, 0.3);
                }
                .card-modal-button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
                    text-decoration: none;
                    color: white;
                }
                @media (max-width: 768px) {
                    .card-modal-content { width: 95%; margin: 20px; }
                    .card-modal-header { padding: 16px 20px; }
                    .card-modal-header h3 { font-size: 1.25rem; }
                    .card-modal-body { padding: 20px; }
                    .card-modal-image img { height: 150px; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ overlay
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        log('Naberika –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω - –ß–∏—Å—Ç—ã–π JavaScript', 'success');
        log('–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫–æ–≤', 'info');
        log('–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –±–ª–æ–∫—É –¥–ª—è –≤—ã–±–æ—Ä–∞, –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è', 'info');
        log('–ö–ª–∞–≤–∏—à–∏: Delete - —É–¥–∞–ª–∏—Ç—å, L - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å, H - —Å–∫—Ä—ã—Ç—å', 'info');
        log('–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏', 'info');
        updateStats();
    </script>
</body>
</html>
